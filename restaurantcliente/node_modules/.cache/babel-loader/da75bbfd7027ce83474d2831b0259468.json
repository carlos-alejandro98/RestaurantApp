{"ast":null,"code":"var _jsxFileName = \"/Users/carlitos/Desktop/RestaurantApp/restaurantcliente/src/components/paginas/NuevoPlatillo.js\";\nimport React, { useContext, useState } from 'react';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { FirebaseContext } from '../../firebase';\nimport { useNavigate } from 'react-router-dom';\nimport FileUploader from 'react-firebase-file-uploader';\n\nconst NuevoPlatillo = () => {\n  // state para las imagenes\n  const [subiendo, guardarSubiendo] = useState(false);\n  const [progreso, guardarProgreso] = useState(0);\n  const [urlimagen, guardarUrlimagen] = useState(''); // Context con las operaciones de firebase\n\n  const {\n    firebase\n  } = useContext(FirebaseContext); // console.log(firebase);\n  // Hook para redireccionar\n\n  const navigate = useNavigate(); // validación y leer los datos del formulario\n\n  const formik = useFormik({\n    initialValues: {\n      nombre: '',\n      precio: '',\n      categoria: '',\n      imagen: '',\n      descripcion: ''\n    },\n    validationSchema: Yup.object({\n      nombre: Yup.string().min(3, 'Los Platillos deben tener al menos 3 caracteres').required('El Nombre del platillo es obligatorio'),\n      precio: Yup.number().min(1, 'Debes agregar un número').required('El Precio es obligatorio'),\n      categoria: Yup.string().required('La categoría es obligatoria'),\n      descripcion: Yup.string().min(10, 'La descripción debe ser más larga').required('La descripción es obligatoria')\n    }),\n    onSubmit: platillo => {\n      try {\n        platillo.existencia = true;\n        platillo.imagen = urlimagen;\n        firebase.db.collection('productos').add(platillo); // Redireccionar\n\n        navigate('/menu');\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }); // Todo sobre las imagenes\n\n  const handleUploadStart = () => {\n    guardarProgreso(0);\n    guardarSubiendo(true);\n  };\n\n  const handleUploadError = error => {\n    guardarSubiendo(false);\n    console.log(error);\n  };\n\n  const handleUploadSuccess = async nombre => {\n    guardarProgreso(100);\n    guardarSubiendo(false); // Almacenar la URL de destino\n\n    const url = await firebase.storage.ref(\"productos\").child(nombre).getDownloadURL();\n    console.log(url);\n    guardarUrlimagen(url);\n  };\n\n  const handleProgress = progreso => {\n    guardarProgreso(progreso);\n    console.log(progreso);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-3xl font-light mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, \"Agregar Platillo\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-center mt-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full max-w-3xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: formik.handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block text-gray-700 text-sm font-bold mb-2\",\n    htmlFor: \"nombre\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 29\n    }\n  }, \"Nombre\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    id: \"nombre\",\n    type: \"text\",\n    placeholder: \"Nombre Platillo\",\n    value: formik.values.nombre,\n    onChange: formik.handleChange,\n    onBlur: formik.handleBlur,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 29\n    }\n  })), formik.touched.nombre && formik.errors.nombre ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-5\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 33\n    }\n  }, \"Hubo un error:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 33\n    }\n  }, formik.errors.nombre, \" \")) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block text-gray-700 text-sm font-bold mb-2\",\n    htmlFor: \"precio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  }, \"Precio\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    id: \"precio\",\n    type: \"number\",\n    placeholder: \"$20\",\n    min: \"0\",\n    value: formik.values.precio,\n    onChange: formik.handleChange,\n    onBlur: formik.handleBlur,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  })), formik.touched.precio && formik.errors.precio ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-5\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 33\n    }\n  }, \"Hubo un error:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 33\n    }\n  }, formik.errors.precio, \" \")) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block text-gray-700 text-sm font-bold mb-2\",\n    htmlFor: \"nombre\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 29\n    }\n  }, \"Categor\\xEDa\"), /*#__PURE__*/React.createElement(\"select\", {\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    id: \"precio\",\n    name: \"categoria\",\n    value: formik.values.categoria,\n    onChange: formik.handleChange,\n    onBlur: formik.handleBlur,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 33\n    }\n  }, \"-- Seleccione --\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"desayuno\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 33\n    }\n  }, \"Desayuno\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"comida\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 33\n    }\n  }, \"Comida\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"cena\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 33\n    }\n  }, \"Cena\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"bebida\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 33\n    }\n  }, \"Bebidas\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"postre\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 33\n    }\n  }, \"Postre\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"ensalada\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 33\n    }\n  }, \"Ensalada\"))), formik.touched.categoria && formik.errors.categoria ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-5\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 33\n    }\n  }, \"Hubo un error:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 33\n    }\n  }, formik.errors.categoria, \" \")) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block text-gray-700 text-sm font-bold mb-2\",\n    htmlFor: \"imagen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 29\n    }\n  }, \"Imagen\"), /*#__PURE__*/React.createElement(FileUploader, {\n    accept: \"image/*\",\n    id: \"imagen\",\n    name: \"imagen\",\n    randomizeFilename: true,\n    storageRef: firebase.storage.ref(\"productos\"),\n    onUploadStart: handleUploadStart,\n    onUploadError: handleUploadError,\n    onUploadSuccess: handleUploadSuccess,\n    onProgress: handleProgress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 29\n    }\n  })), subiendo && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-12 relative w-full border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-green-500 absolute left-0 top-0 text-white px-2 text-sm h-12 flex items-center\",\n    style: {\n      width: `${progreso}%`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 33\n    }\n  }, progreso, \" %\")), urlimagen && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"bg-green-500 text-white p-3 text-center my-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 29\n    }\n  }, \"La imagen se subi\\xF3 correctamente\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block text-gray-700 text-sm font-bold mb-2\",\n    htmlFor: \"descripcion\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 29\n    }\n  }, \"Descripci\\xF3n\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-40\",\n    id: \"descripcion\",\n    placeholder: \"Descripci\\xF3n del Platillo\",\n    value: formik.values.descripcion,\n    onChange: formik.handleChange,\n    onBlur: formik.handleBlur,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 29\n    }\n  })), formik.touched.descripcion && formik.errors.descripcion ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-5\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 33\n    }\n  }, \"Hubo un error:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 33\n    }\n  }, formik.errors.descripcion, \" \")) : null, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"bg-gray-800 hover:bg-gray-900 w-full mt-5 p-2 text-white uppercase font-bold\",\n    value: \"Agregar Platillo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 25\n    }\n  })))));\n};\n\nexport default NuevoPlatillo;","map":{"version":3,"sources":["/Users/carlitos/Desktop/RestaurantApp/restaurantcliente/src/components/paginas/NuevoPlatillo.js"],"names":["React","useContext","useState","useFormik","Yup","FirebaseContext","useNavigate","FileUploader","NuevoPlatillo","subiendo","guardarSubiendo","progreso","guardarProgreso","urlimagen","guardarUrlimagen","firebase","navigate","formik","initialValues","nombre","precio","categoria","imagen","descripcion","validationSchema","object","string","min","required","number","onSubmit","platillo","existencia","db","collection","add","error","console","log","handleUploadStart","handleUploadError","handleUploadSuccess","url","storage","ref","child","getDownloadURL","handleProgress","handleSubmit","values","handleChange","handleBlur","touched","errors","width"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup'\nimport { FirebaseContext } from '../../firebase';\nimport { useNavigate } from 'react-router-dom';\nimport FileUploader from 'react-firebase-file-uploader';\n\nconst NuevoPlatillo = () => {\n\n    // state para las imagenes\n    const [subiendo, guardarSubiendo] = useState(false);\n    const [progreso, guardarProgreso ] = useState(0);\n    const [ urlimagen, guardarUrlimagen] = useState('');\n\n\n    // Context con las operaciones de firebase\n    const { firebase } = useContext(FirebaseContext);\n\n    // console.log(firebase);\n    \n    // Hook para redireccionar\n    const navigate = useNavigate();\n\n\n    // validación y leer los datos del formulario\n    const formik = useFormik({\n        initialValues: {\n            nombre: '',\n            precio: '',\n            categoria: '',\n            imagen: '',\n            descripcion: '',\n        }, \n        validationSchema: Yup.object({\n            nombre: Yup.string()\n                        .min(3, 'Los Platillos deben tener al menos 3 caracteres')\n                        .required('El Nombre del platillo es obligatorio'),\n            precio: Yup.number()\n                        .min(1, 'Debes agregar un número')\n                        .required('El Precio es obligatorio'),\n            categoria: Yup.string()\n                        .required('La categoría es obligatoria'),\n            descripcion: Yup.string()\n                        .min(10, 'La descripción debe ser más larga')\n                        .required('La descripción es obligatoria'),\n                        \n        }),\n        onSubmit: platillo => {\n            try {\n                platillo.existencia = true;\n                platillo.imagen = urlimagen;\n\n                firebase.db.collection('productos').add(platillo);\n\n                // Redireccionar\n                navigate('/menu');\n            } catch (error) {\n                console.log(error);\n            }\n        }\n    });\n\n    // Todo sobre las imagenes\n    const handleUploadStart = () => {\n        guardarProgreso(0);\n        guardarSubiendo(true);\n    }\n    const handleUploadError = error => {\n        guardarSubiendo(false);\n        console.log(error);\n    }\n    const handleUploadSuccess = async nombre => {\n        guardarProgreso(100);\n        guardarSubiendo(false);\n\n        // Almacenar la URL de destino\n        const url = await firebase\n                .storage\n                .ref(\"productos\")\n                .child(nombre)\n                .getDownloadURL();\n\n        console.log(url);\n        guardarUrlimagen(url);\n    }\n    const handleProgress = progreso => {\n        guardarProgreso(progreso);\n\n        console.log(progreso);\n    }\n\n\n    return ( \n        <>\n            <h1 className=\"text-3xl font-light mb-4\">Agregar Platillo</h1>\n\n            <div className=\"flex justify-center mt-10\">\n                <div className=\"w-full max-w-3xl\">\n                    <form\n                        onSubmit={formik.handleSubmit}\n                    >\n                        <div className=\"mb-4\">\n                            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"nombre\">Nombre</label>\n                            <input \n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                                id=\"nombre\"\n                                type=\"text\"\n                                placeholder=\"Nombre Platillo\"\n                                value={formik.values.nombre}\n                                onChange={formik.handleChange}\n                                onBlur={formik.handleBlur}\n                            />\n                        </div>\n                        { formik.touched.nombre && formik.errors.nombre ? (\n                            <div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-5\" role=\"alert\">\n                                <p className=\"font-bold\">Hubo un error:</p>\n                                <p>{formik.errors.nombre} </p>\n                            </div>\n                        ) : null }\n\n\n                        <div className=\"mb-4\">\n                            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"precio\">Precio</label>\n                            <input \n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                                id=\"precio\"\n                                type=\"number\"\n                                placeholder=\"$20\"\n                                min=\"0\"\n                                value={formik.values.precio}\n                                onChange={formik.handleChange}\n                                onBlur={formik.handleBlur}\n                            />\n                        </div>\n\n                        { formik.touched.precio && formik.errors.precio ? (\n                            <div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-5\" role=\"alert\">\n                                <p className=\"font-bold\">Hubo un error:</p>\n                                <p>{formik.errors.precio} </p>\n                            </div>\n                        ) : null }\n\n                        <div className=\"mb-4\">\n                            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"nombre\">Categoría</label>\n                            <select\n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                                id=\"precio\"\n                                name=\"categoria\"\n                                value={formik.values.categoria}\n                                onChange={formik.handleChange}\n                                onBlur={formik.handleBlur}\n                            >\n                                <option value=\"\">-- Seleccione --</option>\n                                <option value=\"desayuno\">Desayuno</option>\n                                <option value=\"comida\">Comida</option>\n                                <option value=\"cena\">Cena</option>\n                                <option value=\"bebida\">Bebidas</option>\n                                <option value=\"postre\">Postre</option>\n                                <option value=\"ensalada\">Ensalada</option>\n\n                            </select>\n                        </div>\n\n                        { formik.touched.categoria && formik.errors.categoria ? (\n                            <div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-5\" role=\"alert\">\n                                <p className=\"font-bold\">Hubo un error:</p>\n                                <p>{formik.errors.categoria} </p>\n                            </div>\n                        ) : null }\n\n\n                        <div className=\"mb-4\">\n                            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"imagen\">Imagen</label>\n                            <FileUploader\n                                accept=\"image/*\"\n                                id=\"imagen\"\n                                name=\"imagen\"\n                                randomizeFilename\n                                storageRef={firebase.storage.ref(\"productos\")}\n                                onUploadStart={handleUploadStart}\n                                onUploadError={handleUploadError}\n                                onUploadSuccess={handleUploadSuccess}\n                                onProgress={handleProgress}\n                            />\n                        </div>\n\n                        { subiendo && (\n                            <div className=\"h-12 relative w-full border\">\n                                <div className=\"bg-green-500 absolute left-0 top-0 text-white px-2 text-sm h-12 flex items-center\" style={{ width: `${progreso}%` }}>\n                                    {progreso} % \n                                </div>\n                            </div>\n                        ) }\n\n                        {urlimagen && (\n                            <p className=\"bg-green-500 text-white p-3 text-center my-5\">\n                                La imagen se subió correctamente\n                            </p>\n                        ) }\n\n                        <div className=\"mb-4\">\n                            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"descripcion\">Descripción</label>\n                            <textarea \n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-40\"\n                                id=\"descripcion\"\n                                placeholder=\"Descripción del Platillo\"\n                                value={formik.values.descripcion}\n                                onChange={formik.handleChange}\n                                onBlur={formik.handleBlur}\n                            ></textarea>\n                        </div>\n\n                        { formik.touched.descripcion && formik.errors.descripcion ? (\n                            <div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-5\" role=\"alert\">\n                                <p className=\"font-bold\">Hubo un error:</p>\n                                <p>{formik.errors.descripcion} </p>\n                            </div>\n                        ) : null }\n\n                        <input\n                            type=\"submit\"\n                            className=\"bg-gray-800 hover:bg-gray-900 w-full mt-5 p-2 text-white uppercase font-bold\"\n                            value=\"Agregar Platillo\"\n                        />\n                    </form>\n                </div>\n            </div>\n        </>\n     );\n}\n \nexport default NuevoPlatillo;"]},"metadata":{},"sourceType":"module"}